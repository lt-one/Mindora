# 个人网站搭建方案（优化版）

## 一、技术栈选择
### 前端
- **框架**：Next.js 14 (App Router)
- **语言**：TypeScript
- **样式**：Tailwind CSS + shadcn/ui
- **状态管理**：Zustand (按功能模块拆分)
- **数据可视化**：ECharts (动态导入)

### 后端
- **框架**：Node.js + Express + Server Actions
- **语言**：TypeScript
- **数据库**：MySQL
- **ORM**：Prisma
- **API类型**：RESTful API + Server Actions

### 部署
- **前端**：Vercel
- **后端API**：Vercel Serverless Functions（备选：阿里云）
- **数据库**：阿里云数据库服务

## 二、网站架构设计

### 1. 项目结构（App Router优化）
```
MindBreak/
├── app/                     # Next.js App Router结构
│   ├── layout.tsx           # 全局布局
│   ├── page.tsx             # 首页
│   ├── blog/                # 博客相关路由
│   │   ├── page.tsx         # 博客列表页
│   │   ├── [slug]/          # 博客详情动态路由
│   │   │   └── page.tsx     # 博客详情页面
│   │   ├── projects/        # 项目展示路由
│   │   ├── dashboard/       # 数据仪表盘路由
│   │   │   ├── page.tsx     # 主仪表盘页面
│   │   │   ├── layout.tsx   # 仪表盘共享布局
│   │   │   └── [category]/  # 分类数据详情页
│   │   │       └── page.tsx # 特定类别数据页面
│   │   ├── todo/            # Todo应用路由
│   │   ├── good-sites/      # 好站分享路由
│   │   │   ├── page.tsx     # 好站列表页面
│   │   │   ├── [category]/  # 按分类展示的动态路由
│   │   │   │   └── page.tsx # 分类页面
│   │   │   └── site/        # 网站详情页
│   │   │       └── [id]/    # 特定网站详情
│   │   │           └── page.tsx # 网站详情页面
│   │   ├── notes/           # 文档卡片路由
│   │   │   ├── page.tsx     # 文档卡片列表页
│   │   │   └── [id]/        # 特定卡片详情动态路由
│   │   │       └── page.tsx # 卡片详情页面
│   │   ├── reviews/         # 观后感文章路由
│   │   │   ├── page.tsx     # 观后感文章列表页
│   │   │   ├── [type]/      # 按类型(书籍/电影/剧集)展示的动态路由
│   │   │   │   ├── page.tsx # 类型列表页面
│   │   │   │   └── [slug]/  # 特定观后感详情
│   │   │   │       └── page.tsx # 观后感详情页面
│   │   │   ├── about/       # 关于页面路由
│   │   │   ├── contact/     # 联系页面路由
│   │   │   └── api/         # API路由处理
│   │   │       ├── financial-data/ # 金融数据API
│   │   │       │   └── route.ts # API路由处理器
│   │   │       └── good-sites/   # 好站分享API
│   │   │           └── route.ts # API路由处理器
│   │   └── components/        # 组件目录
│   │       ├── ui/            # 通用UI组件
│   │       ├── blog/          # 博客相关组件
│   │       ├── projects/      # 项目相关组件
│   │       ├── charts/        # 数据可视化图表组件
│   │       │   ├── LineChart.tsx # 时间序列数据折线图
│   │       │   ├── BarChart.tsx # 分类比较数据柱状图
│   │       │   └── PieChart.tsx # 占比数据饼图
│   │       ├── DataGrid.tsx   # 详细数据表格组件
│   │       ├── todo/          # Todo应用组件
│   │       ├── good-sites/    # 好站分享组件
│   │       │   ├── SiteCard.tsx # 网站卡片组件
│   │       │   ├── SiteFilter.tsx # 网站筛选组件
│   │       │   └── SiteDetail.tsx # 网站详情组件
│   │       ├── notes/         # 文档卡片组件
│   │       │   ├── NoteCard.tsx # 卡片展示组件
│   │       │   ├── NoteEditor.tsx # 卡片编辑器组件
│   │       │   └── TagFilter.tsx # 标签筛选组件
│   │       ├── reviews/       # 观后感文章组件
│   │       │   ├── ReviewCard.tsx # 观后感卡片组件
│   │       │   ├── ReviewDetail.tsx # 观后感详情组件
│   │       │   └── TypeFilter.tsx # 类型筛选组件
│   │       └── layout/        # 布局相关组件
│   │           └── Sidebar.tsx # 导航侧边栏
│   └── lib/                 # 工具函数
│       ├── db/              # 数据库相关
│       ├── utils/           # 通用工具
│       └── api/             # API相关函数
├── public/                  # 静态资源
├── styles/                  # 全局样式
└── types/                   # TypeScript类型定义
```

### 2. 数据库设计
- User（用户信息）
- Project（项目展示）
- BlogPost（博客文章）
- TodoItem（待办事项）
- GoodSite（好站分享）
- NoteCard（文档卡片）
- Review（观后感文章）
- ExternalData（外部数据）
  - FinancialData（金融数据）
  - MarketTrends（市场趋势）
  - IndustryMetrics（行业指标）

## 三、功能模块实现方案

### 1. 首页模块
- 部分预渲染（PPR）：静态部分立即展示，动态内容流式加载
- 使用服务端组件获取个人信息数据，减少客户端JavaScript
- 添加平滑滚动和微动效，使用客户端组件包装交互部分

### 2. 项目展示模块
- 静态生成（SSG）+ ISR（24小时刷新一次）
- 卡片式布局展示项目，使用Image组件优化图片加载
- 使用React Server Components获取项目数据，减少客户端负担
- 筛选功能使用客户端组件，保持URL状态同步

### 3. 博客系统
- 静态生成（SSG）+ ISR（60分钟刷新）
- Markdown编辑器动态导入（可使用react-markdown）
- 文章分类与标签系统使用服务端组件获取数据
- 评论功能使用Suspense流式传输，保证主要内容快速加载
- 使用Route Handlers和Server Actions处理评论提交

### 4. Todo List功能
- 混合渲染：服务端组件初始数据获取 + 客户端交互
- 使用客户端组件处理交互逻辑：
  - 添加、编辑、删除待办事项
  - 拖拽排序
  - 状态切换（完成/未完成）
- 使用Server Actions处理数据持久化
- 本地存储+数据库同步，使用SWR进行数据缓存和重验证
- 扩展功能：
  - 分类管理
  - 截止日期提醒
  - 优先级设置

### 5. 好站分享功能
- 静态生成（SSG）+ ISR（24小时刷新一次）
- 功能概述：收集和分享对个人有帮助、日常生活和工作中能用到的优质网站资源，提供分类浏览和搜索功能
- 目标用户：
  - 开发者和设计师：寻找专业工具和资源
  - 学习者：需要学习资源和平台
  - 职场人士：寻找提高工作效率工具
  - 内容创作者：需要创作资源和灵感
  - 一般访问者：对优质网络资源感兴趣
- 核心功能：
  - 卡片式布局展示网站资源
  - 多维度分类与筛选系统（类别、标签、免费/付费等）
  - 详细的网站介绍和使用场景说明
  - 搜索和排序功能
  - 个人使用体验和评价分享
- 数据模型：GoodSite（已在schema.prisma中定义）
  - 基本信息：网站名称、URL、描述、简短描述
  - 分类信息：主分类、标签数组
  - 评价信息：评分、是否免费、是否有付费版本
  - 详细内容：截图URL、使用场景、使用技巧、个人体验
  - 管理信息：创建时间、更新时间、是否活跃、查看次数、是否特色
- 技术实现：
  - 前端：Next.js App Router、React Server Components获取数据、客户端组件处理交互
  - 数据源：手动收集和整理的优质网站资源、个人使用体验
  - 交互设计：筛选交互、搜索交互、卡片悬停效果
- 实施计划：
  - 阶段一：基础展示功能，含初始30个优质资源
  - 阶段二：完善筛选和搜索功能
  - 阶段三：添加用户交互功能（评论、收藏等）
  - 阶段四：特色集合和进阶功能

### 6. 文档卡片功能
- 混合渲染：服务端组件初始数据获取 + 客户端交互
- 功能描述：记录临时灵感和计划中的事项，类似便签系统
- 数据模型：NoteCard（标题、内容、创建日期、标签、状态）
- 展示方式：可拖拽的卡片布局，支持不同视图（网格/列表）
- 交互功能：
  - 创建、编辑、删除卡片
  - 添加标签和分类
  - 卡片状态管理
  - 卡片排序
- 使用客户端组件处理卡片交互，Server Actions处理数据持久化
- 本地缓存支持离线编辑，SWR同步数据

### 7. 观后感文章功能
- 静态生成（SSG）+ ISR（24小时刷新）
- 功能概述：「散场之后」是记录和分享个人对影视作品和书籍的见解与感受的内容板块，包含「书页留思」(书本读后感)和「光影随想」(电影观后感)两个专区
- 目标用户：
  - 内容创作者（网站所有者）：记录和分享观影/阅读体验
  - 影视爱好者：寻找电影/剧集评论和推荐
  - 文学爱好者：对书籍评论和阅读心得感兴趣
  - 批评理论研究者：关注媒体批评视角
  - 一般访客：浏览有趣的文化内容
- 核心功能：
  - **「书页留思」专区**：
    - 书籍评论和读后感展示
    - 按书籍类型、主题、作者等分类
    - 阅读体验和收获分享
    - 精选书籍推荐
  - **「光影随想」专区**：
    - 电影和剧集观后感展示
    - 按类型、导演、年代等分类
    - 影片分析和评价
    - 相关影片推荐
  - **通用功能**：
    - 作品信息展示（标题、创作者、年份等）
    - 评分和推荐系统
    - 内容分类与标签
    - 评论和互动功能
    - 相关推荐系统
- 数据模型：
  - Review：评论文章（标题、内容、封面图、评分等）
  - Work：作品信息（标题、类型、创作者、年份等）
  - Category：分类（书籍、电影、剧集等）
  - Tag：标签系统
  - Comment：用户评论
- 技术实现：
  - 前端：Next.js静态生成与ISR结合
  - 内容：Markdown渲染、评分组件
  - 交互：分类导航、剧透保护机制
  - 性能：图片优化、惰性加载
- 内容设计：
  - 「书页留思」：侧重阅读体验和思想启发，文学性分析
  - 「光影随想」：侧重视听语言和叙事分析，情感共鸣
  - 通用规范：避免过度剧透（或提供警告）、平衡描述与分析、注重个人视角
- 分阶段实现：
  - 阶段一：基础阅读功能（内容展示、分类浏览）
  - 阶段二：增强交互功能（评论、点赞、剧透处理）
  - 阶段三：完善功能（个性化推荐、数据统计）

### 8. 关于我页面
- 静态生成（SSG）
- 个人简历组件化设计
- 技能展示使用动态导入的ECharts，减少初始加载大小
- 教育背景与工作经验时间线
- 兴趣爱好展示

### 9. 联系页面
- 静态页面 + 客户端表单交互
- 联系表单使用Server Actions处理提交
- 社交媒体链接展示

### 10. 数据仪表盘与可视化
- 数据获取系统（使用公共API和静态数据）
- 定时更新（使用Vercel ISR和Revalidation）
- 数据处理流程：
  1. 通过API获取外部数据
  2. 数据格式转换与处理
  3. 存储到MySQL数据库
- 前端可视化组件结构：
  - `components/charts/LineChart.tsx` - 时间序列数据展示
  - `components/charts/BarChart.tsx` - 分类比较数据展示
  - `components/charts/PieChart.tsx` - 占比数据展示
  - `components/DataGrid.tsx` - 详细数据表格展示
- 页面组件结构：
  - `app/dashboard/page.tsx` - 主仪表盘，集成各图表
  - `app/dashboard/[category]/page.tsx` - 特定类别数据详情
- 数据筛选使用客户端组件，保持URL状态同步

### 11. 数据流设计
- **数据获取流程**：
  1. 前端组件初始化并调用API（使用SWR或React Query）
  2. API端点（如`app/api/financial-data/route.ts`）从外部源获取并处理数据
  3. 前端接收数据并更新状态，触发组件重渲染
- **数据刷新策略**：
  - 使用SWR的自动重验证进行周期性数据刷新
  - 添加手动刷新按钮供用户主动更新数据
  - 对于实时性要求高的数据，考虑使用数据轮询或WebSocket连接
- **错误处理机制**：
  - API级别错误捕获与日志记录
  - 前端错误边界处理组件级错误
  - 用户友好的错误提示与重试机制

## 四、性能优化策略

### 1. 图片优化
- 使用Next.js的Image组件优化图片加载
- 实现模糊占位符和响应式尺寸
- 适当设置优先级，优化关键图片加载

### 2. 代码分割与懒加载
- 动态导入大型组件，减少初始加载体积
- 为懒加载组件添加加载状态
- 延迟加载非首屏数据可视化和编辑器组件

### 3. 第三方脚本优化
- 使用next/script的策略属性控制脚本加载时机
- 分析工具脚本设置为afterInteractive
- 非关键脚本延迟加载

### 4. 服务端组件与客户端组件划分
- **服务端组件**（默认）：数据获取、静态内容展示、SEO相关内容
- **客户端组件**：添加'use client'指令，用于交互性强的功能（表单、Todo交互等）

### 5. 状态管理优化
- 按功能模块拆分Zustand store
- 创建专用store处理UI状态（暗黑模式等）
- 创建专用store处理业务逻辑（Todo等）

## 五、开发流程

1. **[✅已完成] 项目初始化**：使用App Router结构搭建Next.js项目
   - 创建基本目录结构
   - 配置必要的开发环境
   - 安装核心依赖包

2. **[✅已完成] 数据库设计**：定义数据模型，建立Prisma Schema
   - 设计数据表结构与关系
   - 创建Prisma模型
   - 配置数据库连接

3. **[✅已完成] 基础UI框架搭建**：
   - 实现全局布局与导航
   - 集成主题系统（暗黑模式支持）
   - 配置全局样式与UI组件库
   - 创建共享组件（Navbar、Footer等）

4. **页面原型开发**：
   - 使用模拟数据创建各功能页面
   - 实现基本页面路由
   - 开发主要UI组件
   - 实现基础交互逻辑

5. **Server Components与Actions设计**：
   - 基于UI需求确定数据需求
   - 设计并实现Server Components数据获取逻辑
   - 开发Server Actions处理数据修改操作
   - 设计必要的API端点（仅用于客户端组件）

6. **功能模块实现**：
   - 集成数据与UI
   - 实现完整交互逻辑
   - 添加错误处理与加载状态
   - 完善各功能模块细节

7. **性能优化**：
   - 实现懒加载与代码分割
   - 优化图片加载
   - 缓存策略实现
   - 减少客户端JavaScript量

8. **测试与调试**：
   - 单元测试
   - 集成测试
   - 性能测试
   - 跨浏览器兼容性测试

9. **部署准备**：
   - 环境变量配置
   - 构建优化
   - CI/CD配置

10. **部署上线**：
    - Vercel部署前端
    - 配置数据库生产环境
    - 监控系统配置

## 当前进度
- ✅ 完成项目基本结构搭建
- ✅ 完成数据库Schema设计与模型定义
- ✅ 完成基础UI框架搭建
  - 实现全局布局与导航
  - 集成主题系统（暗黑模式支持）
  - 配置全局样式与UI组件库
  - 创建共享组件（Navbar、Footer等）
- ✅ 完成首页模块实现
  - 创建个人品牌展示区（HeroSection）
  - 开发精选项目展示区（FeaturedProjects）
    - 添加项目轮播功能
    - 实现渐变色标签和背景动画
    - 优化图片加载和交互体验
  - 实现最新博客文章区（LatestPosts）
    - 使用Unsplash固定图片资源（替代随机API）
    - 优化文章卡片展示效果
  - 构建数据可视化概览区（DataInsight）
  - 完成效率工具入口区（ToolsSection）
    - 添加悬浮动画和过渡效果
    - 优化卡片设计和视觉层次
  - 优化响应式设计和动画效果
  - 配置next.config.ts支持远程图片域名
    - 使用推荐的remotePatterns配置代替已废弃的domains
    - 添加对images.unsplash.com域名的支持
- ✅ 完成项目展示模块基础功能
  - 项目列表页面开发和优化
    - 实现项目卡片组件（ProjectCard）展示项目信息
    - 开发项目筛选器（ProjectFilter）支持类别和技术筛选
    - 实现视图切换功能（ViewToggle）支持网格视图和列表视图
    - 添加技术标签列表（TechTagList）用于快速筛选
    - 集成项目统计数据展示
  - 项目详情弹窗实现
    - 新增项目详情弹窗（ProjectModal）替代传统详情页
    - 使用shadcn/ui Dialog组件优化弹窗交互体验
    - 实现点击卡片任意区域打开详情弹窗功能
    - 项目详情内容格式化与美化
  - 视觉设计与交互优化
    - 解决导航栏遮挡页面内容问题（添加适当内边距）
    - 优化项目卡片设计（改进日期展示位置和样式）
    - 增强项目卡片视觉层次和用户体验
    - 添加背景装饰元素和动画效果提升视觉吸引力
    - 优化卡片悬停和过渡效果
  - 解决技术问题
    - 修复字体加载问题（移除Google Fonts依赖，使用系统字体）
    - 解决路由参数处理问题（处理searchParams异步使用错误）
    - 优化开发环境，禁用Turbopack解决兼容性问题
  - 待完成功能
    - 项目详情独立页面开发
    - 优化图片加载性能，解决部分远程图片加载失败问题
    - 完善移动端适配
    - 增强项目筛选交互体验
    - 解决构建过程中的模块路径错误和清单文件缺失问题

- ✅ 完成博客系统基础功能
  - 博客列表页面实现
    - 创建博客文章卡片组件（BlogPostCard）
    - 实现博客文章列表组件（BlogList）
    - 开发博客筛选器组件（BlogFilter）支持分类和标签筛选
    - 实现视图切换功能，支持网格视图和列表视图
    - 添加文章元数据展示（发布日期、阅读时间、阅读量、点赞数）
  - 搜索功能实现
    - 开发搜索框组件（SearchBox）
    - 开发搜索历史组件（SearchHistory）
    - 实现搜索历史记录功能，支持清除历史
    - 优化搜索交互，支持点击历史记录直接搜索
  - 分类和标签页面实现
    - 创建分类详情页面（/blog/category/[slug]）
    - 实现标签详情页面（/blog/tag/[slug]）
    - 支持分类和标签之间的交叉导航
    - 实现博客全部文章页面（/blog/all）
  - 博客内容支持组件
    - 实现Markdown内容渲染组件（MarkdownContent）
    - 开发文章目录组件（TableOfContents）
    - 设计数据模型和类型定义
  - 解决技术问题
    - 处理路由参数和searchParams异步使用问题
    - 优化条件渲染和状态管理
    - 实现URL参数同步，支持书签和分享
  - 待完成功能
    - 文章详情页面开发（需解决路由参数处理问题）
    - 评论功能实现
    - 解决博客图片资源加载问题，特别是远程图片加载失败问题
    - 完善移动端适配
    - 实现文章归档页面
    - 添加相关文章推荐功能
    - 集成点赞和分享功能

- ✅ 完成数据仪表盘模块基础功能
  - 核心图表组件开发
    - 实现折线图组件（LineChart）用于时间序列数据展示
    - 实现柱状图组件（BarChart）用于分类比较数据展示
    - 实现饼图组件（PieChart）用于占比数据展示
    - 开发统计卡片组件（StatCard）用于KPI指标展示
    - 实现股票列表组件（StockList）用于财务数据展示
  - 仪表盘页面实现
    - 创建主仪表盘页面（/dashboard）
    - 实现分类仪表盘页面（/dashboard/[category]）
    - 支持不同数据类别：财务数据、项目管理、网站性能
    - 添加导航和面包屑，支持分类切换
    - 实现仪表盘布局系统，支持不同尺寸的图表排列
  - 数据功能与交互
    - 实现数据加载状态展示，包括骨架屏
    - 添加错误处理和优雅降级
    - 支持基础的数据筛选（时间范围、数据类型）
    - 实现图表响应式适配
  - 解决技术问题
    - 解决ECharts动态导入配置
    - 优化图表渲染性能
  - 待完成功能
    - 数据源连接配置的完善
    - 添加数据导出功能
    - 实现更高级的交互式数据筛选
    - 解决类型定义问题（DashboardData缺少dataSource和lastUpdated属性）

## 六、Next.js配置优化

- **部分预渲染**：开启PPR功能提升首屏体验
- **图片优化**：配置CDN域名和现代图片格式
- **静态资源缓存**：设置长期缓存策略
- **包导入优化**：配置optimizePackageImports优化大型库导入
- **开发体验**：使用Turbopack提升开发速度

## 七、组件设计原则

- **职责单一**：每个组件只负责一个功能，避免过度复杂
- **可复用性**：设计通用组件供多个页面使用
- **可测试性**：组件设计便于单元测试
- **状态隔离**：合理划分客户端/服务端组件，避免不必要的状态传递
- **性能优化**：组件级别的代码分割与懒加载

## 八、特色功能
- 暗黑模式支持 (使用Next.js主题支持)
- 国际化支持（中/英）(使用next-intl)
- SEO优化 (使用Next.js内置的元数据API)
- 响应式设计，适配各种设备
- 渐进式Web应用（PWA）支持 

## 九、未来计划添加功能
- 实时通知系统
